{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">-
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'blog/main.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">

    <style>
        /* General Styles */
        body {
            padding-top: 100px; /* Adjust margin for fixed header */
            padding-left: 20px;
            padding-right: 20px;
        }
       
        .chat-container {
            
            max-width: 800px;
            margin: 0 auto;
        }

        #message-container {
            margin-top: 20px;
            overflow-y: auto;
            max-height: 400px;
        }

        .message {
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 8px;
            background-color: #f0f0f0;
        }
        .time{
            margin-bottom: 10px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f0f0f0;
        }

        form {
            margin-top: 20px;
        }

        textarea {
            width: calc(100% - 40px);
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
        }

        button {
            background-color: #0056b3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #003366;
        }

        .additional-content {
        position: fixed;
        top: 150px; 
        left: 20px;
        width: 15%;
        height:70%;
        border: 2px solid #0056b3; /* Add bold border */
        padding: 20px; /* Add padding for content */
        background-color: #f0f0f0; /* Add background color */
        border-radius: 8px; 
        }
        .dropdown {
  margin-right: 50px; 
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0; 

  display: none;
  float: left;
  min-width: 10rem;
  padding: 5%;
  margin: .125rem 0 0;
  font-size: 1rem;
  color: #9dc3e8;
  text-align: left;
  list-style: none;
  background-color: #cad1e0;
  background-clip: padding-box;
  border: 1px solid rgba(0, 0, 0, .15);
  border-radius: .30rem;
}

.dropdown-menu.show {
  display: block;
}

.dropdown-item {
  display: block;
  width: 100%;
  padding: .30rem 1.5rem;
  clear: both;
  font-weight: 400;
  color: #121415;
  text-align: inherit;
  white-space: nowrap;
  background-color: transparent;
  border: 0;
} 

.dropdown-item:focus, .dropdown-item:hover {
  color: #16181b;
  text-decoration: none;
  background-color: #f8f9fa;
}


.btn-dropdown-toggle{
  padding: 10px;
  width: 160px;
  border-radius: 10%;
  background-color: rgb(90, 166, 220);
  margin-right: -60px;
  margin-top: 10px;
  cursor: pointer;
}

.btn-dropdown-toggle:hover{
  background-color: rgb(5, 121, 183);
}
.btn {
        width: 100%; /* Set width to 100% */
        margin-bottom: 10px; /* Add some margin between buttons */
    }
    .dropdown {
  margin-right: 50px; 
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0; 

  display: none;
  float: left;
  min-width: 10rem;
  padding: 5%;
  margin: .125rem 0 0;
  font-size: 1rem;
  color: #9dc3e8;
  text-align: left;
  list-style: none;
  background-color: #cad1e0;
  background-clip: padding-box;
  border: 1px solid rgba(0, 0, 0, .15);
  border-radius: .30rem;
}

.dropdown-menu.show {
  display: block;
}

.dropdown-item {
  display: block;
  width: 100%;
  padding: .30rem 1.5rem;
  clear: both;
  font-weight: 400;
  color: #121415;
  text-align: inherit;
  white-space: nowrap;
  background-color: transparent;
  border: 0;
} 

.dropdown-item:focus, .dropdown-item:hover {
  color: #16181b;
  text-decoration: none;
  background-color: #f8f9fa;
}


.btn-dropdown-toggle{
  padding: 10px;
  width: 160px;
  border-radius: 10%;
  background-color: rgb(90, 166, 220);
  margin-right: -60px;
  margin-top: 10px;
  cursor: pointer;
}

.btn-dropdown-toggle:hover{
  background-color: rgb(5, 121, 183);
}
.btn {
        width: 100%; /* Set width to 100% */
        margin-bottom: 10px; /* Add some margin between buttons */
    }


    </style>
</head>

<body>

    <header class="site-header">
        <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top">
          <div class="container">
              <svg style="padding-right: 10px;" id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><g><path d="m512 45c0-24.853-20.147-45-45-45h-422c-24.853 0-45 20.147-45 45v90c0 8.284 6.716 15 15 15h482c8.284 0 15-6.716 15-15z" fill="#7d81e7"/><path d="m467 0h-211v150h241c8.284 0 15-6.716 15-15v-90c0-24.853-20.147-45-45-45z" fill="#5e69e2"/><g><g><path d="m81 82.5h-20c-8.284 0-15-6.716-15-15s6.716-15 15-15h20c8.284 0 15 6.716 15 15s-6.716 15-15 15z" fill="#fff79f"/></g><g><path d="m161 82.5h-20c-8.284 0-15-6.716-15-15s6.716-15 15-15h20c8.284 0 15 6.716 15 15s-6.716 15-15 15z" fill="#90e36a"/></g><g><path d="m241 82.5h-20c-8.284 0-15-6.716-15-15s6.716-15 15-15h20c8.284 0 15 6.716 15 15s-6.716 15-15 15z" fill="#ff80a7"/></g></g><g><path d="m0 135v332c0 24.813 20.187 45 45 45h422c24.813 0 45-20.187 45-45v-332z" fill="#f9f9f9"/></g><path d="m256 512h211c24.813 0 45-20.187 45-45v-332h-256z" fill="#e2dff4"/></g><g><g><g><path d="m173.078 377.005c-10.979 0-11.626-.111-12.339-.233-4.801-.823-8.311-4.985-8.311-9.856v-99.916c0-5.523 4.478-10 10-10s10 4.477 10 10v90c6.774-.001 16.206-.036 24.962-.084h.057c5.497 0 9.968 4.44 9.999 9.944.03 5.522-4.421 10.024-9.944 10.056-11.356.063-19.104.089-24.424.089z" fill="#0a789b"/></g><path d="m116.811 309.839c4.165-5.525 6.638-12.393 6.638-19.829 0-18.202-14.809-33.01-33.01-33.01h-29.047c-5.522 0-10 4.477-10 10v100c0 2.66 1.06 5.21 2.944 7.087 1.875 1.866 4.412 2.913 7.056 2.913h.044c.268-.001 26.811-.119 34.076-.119 20.356 0 36.917-16.561 36.917-36.917 0-12.427-6.179-23.431-15.618-30.125zm-26.372-32.839c7.174 0 13.01 5.836 13.01 13.01s-5.836 13.01-13.01 13.01c-2.139 0-19.048.027-19.048.027v-26.047zm5.073 79.881c-4.385 0-15.704.042-24.12.076v-33.877c2.708-.011 24.12-.032 24.12-.032 9.328 0 16.917 7.589 16.917 16.917s-7.589 16.916-16.917 16.916z" fill="#0a789b"/><g><path d="m407.446 377c-33.084 0-60-26.916-60-60s26.916-60 60-60c12.021 0 23.624 3.545 33.553 10.252 4.576 3.092 5.78 9.308 2.688 13.884-3.091 4.577-9.31 5.779-13.884 2.689-6.61-4.465-14.341-6.826-22.357-6.826-22.056 0-40 17.944-40 40s17.944 40 40 40c20.124 0 29.573-14.565 32.298-30h-19.051c-5.522 0-10-4.477-10-10s4.478-10 10-10h29.915c5.522 0 10 4.477 10 10 0 35.328-21.861 60.001-53.162 60.001z" fill="#08475e"/></g><g><path d="m267.446 377c-33.084 0-60-26.916-60-60s26.916-60 60-60 60 26.916 60 60-26.916 60-60 60zm0-100c-22.056 0-40 17.944-40 40s17.944 40 40 40 40-17.944 40-40-17.944-40-40-40z" fill="#0a789b"/></g><path d="m267.446 257c-3.915 0-7.739.389-11.446 1.108v20.569c3.629-1.086 7.469-1.677 11.446-1.677 22.056 0 40 17.944 40 40s-17.944 40-40 40c-3.977 0-7.818-.592-11.446-1.677v20.569c3.708.719 7.532 1.108 11.446 1.108 33.084 0 60-26.916 60-60s-26.916-60-60-60z" fill="#08475e"/></g></g></g></svg>
            <!-- <a class="navbar-brand mr-4" href="">Django Blog</a> -->
            <buttwon class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </buttwon>
            <div class="collapse navbar-collapse" id="navbarToggle">
              <div class="navbar-nav mr-auto">
                  {% if user.is_authenticated %}
                <a class="nav-item nav-link" href="{% url 'blog-home' %}">HOME</a>
                <a class="nav-item nav-link" href="{% url 'blog-about' %}">ABOUT</a>
              </div>
              <!-- Navbar Right Side -->
              <div class="navbar-nav">
                <!-- <a class="nav-item nav-link" href="#">Login</a>
                <a class="nav-item nav-link" href="#">Register</a> -->
                <!-- <button class="noselect">Create Post</button> -->
  <!--                <h3 style="color: white;">Hello {{request.user}}</h3>-->
                  <a href="{% url 'blog-new' %}" id="auth-links">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  Create / Update Profile
              </a>
                  <a href="{% url 'profile' %}" id="auth-links">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  My Profile
              </a>
                  <a href="{% url 'logout' %}" id="auth-links">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  Logout
              </a>
                  {% else %}
                <a href="{% url 'login' %}" id="auth-links">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  Login
              </a>
              <a href="{% url 'register' %}" id="auth-links">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  Register
              </a>
              <!-- <a href="#">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  Neon button
              </a> -->
                  {% endif %}
              </div>
            </div>
          </div>
        </nav>
      </header>
    <!-- Main Chat Container -->
    <div class="container chat-container">
        <h1>Group Chat</h1>
        <div id="message-container">
            {% for message in messages %}
            <div class="message">{{ message.sender.username }}: {{ message.content }}</div>
                {% if message.sender == request.user %}
                    <a href="{% url 'delete_message' message.id %}">Delete</a>
                {% endif %}
            <span> {{ message.timestamp}}</span>
            {% endfor %}
        </div>
        <form action="{% url 'send_message' %}" method="post">
            {% csrf_token %}
            <textarea name="message" id="message" cols="30" rows="5"></textarea><br>
            <button type="submit">Send</button>
        </form>
    </div>
    <div class="dropdown" style="position: fixed; top: 80px; right: 50px;">
        <button class="btn-dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
          Participants
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <!-- Iterate over the list of usernames to generate dropdown items -->
          {% for user in usernames %}
          <li><a class="dropdown-item" href="{% url 'blog-detail' user.id  %}" >{{ user.name }}</a></li>
          {% endfor %}
          <li><hr class="dropdown-divider"></li>
         
        </ul>
      </div>

   
    <div class="additional-content">
        <button class="btn btn-primary mb-2" onclick="redirectToChat('django')">Django</button>
        <button class="btn btn-primary mb-2" onclick="redirectToChat('react-native')">React Native</button>
        <button class="btn btn-primary mb-2" onclick="redirectToChat('react-js')">React.js</button>
        <button class="btn btn-primary mb-2" onclick="redirectToChat('flask')">Flask</button>
        <button class="btn btn-primary mb-2" onclick="redirectToChat('tensorflow')">TensorFlow</button>
    </div>
      <script>
    function redirectToChat(topic) {
        // Construct the URL based on the topic clicked
        var url = "{% url 'chat' %}?topic=" + topic;
        // Redirect to the constructed URL
        window.location.href = url;
    }
    </script>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>

</html>
